(this["webpackJsonpcomments-react-mobx-ts"]=this["webpackJsonpcomments-react-mobx-ts"]||[]).push([[0],{276:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),c=a.n(i),o=a(323),s=a(27),l=s.a.model("Comment",{id:s.a.identifier,text:s.a.string,author:s.a.string,avatar:s.a.string,date:s.a.Date,rating:0}).views((function(e){return{timeAgo:function(){var t=(new Date).getTime()-e.date.getTime(),a=36e5,n=864e5;return t<a?"".concat(Math.round(t/6e4)," minutes ago"):t<n?"".concat(Math.round(t/a)," hours ago"):"".concat(Math.round(t/n)," days ago")}}})).actions((function(e){return{incrementRating:function(){e.rating+=1},decrementRating:function(){e.rating-=1}}})),d=s.a.model("CommentsStore",{comments:s.a.array(l)}).actions((function(e){return{addComment:function(t){e.comments.push(t)}}})),u=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},m=s.a.model({commentsStore:d}).create({commentsStore:{comments:[{id:u(),text:"This is first comment",author:"Diego Lima",avatar:"https://res.cloudinary.com/tinyfac-es/image/upload/w_1024,h_1024,c_fit/v1627200005/facebook/ti5hffx5qcawk7hrxed5.jpg",date:(new Date).setDate((new Date).getDate()-2),rating:0},{id:u(),text:"This is second comment",author:"Fica Pacianskiy",avatar:"",date:(new Date).setMinutes((new Date).getMinutes()-45),rating:0}]}}),j=Object(n.createContext)(null),h=m,b=j.Provider;function x(){var e=Object(n.useContext)(j);if(null===e)throw new Error("Store cannot be null, please add a context provider");return e}var g,O,f=a(63),v=a(73),p=a(14),w=a(320),C=a(333),y=a(144),S=a(334),D=a(336),R=a(329),A=a(338),T=a(337),k=a(339),M=a(340),q=a(49),E=a(313),F=a(314),B=a(328),I=a(36),W=a(74),V=W.a.div(g||(g=Object(I.a)(["\n\tmargin-left: auto\n"]))),_=a(2),z=function(e){return e<0?"error":e>0?"success":"default"},J=function(e){var t=e.rating;return Object(_.jsx)(V,{children:Object(_.jsx)(B.a,{label:t,color:z(t)})})},L=W.a.div(O||(O=Object(I.a)(["\n\twidth: 100%;\n\tmax-width: 400px;\n"]))),P=function(e){var t=e.text,a=e.author,n=e.rating,r=e.avatar,i=e.incrementRating,c=e.decrementRating,o=e.timeAgo;return Object(_.jsx)(L,{children:Object(_.jsxs)(S.a,{children:[Object(_.jsx)(D.a,{avatar:Object(_.jsx)(R.a,{sx:{bgcolor:q.a[700]},"aria-label":"avatar",src:r,children:r||a[0]}),title:a}),Object(_.jsxs)(A.a,{children:[Object(_.jsx)(T.a,{variant:"body1",color:"text.primary",children:t}),Object(_.jsx)(T.a,{variant:"body2",color:"text.secondary",children:o()})]}),Object(_.jsxs)(k.a,{disableSpacing:!0,children:[Object(_.jsx)(M.a,{"aria-label":"increment rating",onClick:i,children:Object(_.jsx)(E.a,{})}),Object(_.jsx)(M.a,{"aria-label":"decrement rating",onClick:c,children:Object(_.jsx)(F.a,{})}),Object(_.jsx)(J,{rating:n,size:"medium"})]})]})})},U=a(330),G=a(332),H=a(325),K=a(324),N=a(322),Q=a(143),X=a(66),Y=X.a({email:X.b().email("Enter a valid email").required("Email is required"),author:X.b().required("Author is required"),text:X.b().required("Text is required")}),Z=["email"],$=function(e){var t=e.open,a=e.handleClose,n=x().commentsStore.addComment,r=Object(Q.a)({initialValues:{email:"",author:"",text:"",avatar:""},validationSchema:Y,onSubmit:function(e){e.email;var t=Object(v.a)(e,Z);n(Object(f.a)(Object(f.a)({},t),{},{id:u(),date:new Date,rating:0})),r.resetForm(),a()}});return Object(_.jsx)(U.a,{open:t,onClose:a,sx:{"& .MuiDialog-paper":{width:"100%"}},children:Object(_.jsx)("form",{onSubmit:r.handleSubmit,noValidate:!0,children:Object(_.jsx)(G.a,{children:Object(_.jsxs)(w.a,{spacing:2,children:[Object(_.jsx)(H.a,{fullWidth:!0,id:"email",name:"email",label:"Email",type:"email",value:r.values.email,onChange:r.handleChange,error:r.touched.email&&Boolean(r.errors.email),helperText:r.touched.email&&r.errors.email}),Object(_.jsx)(H.a,{fullWidth:!0,id:"author",name:"author",label:"Author",type:"author",value:r.values.author,onChange:r.handleChange,error:r.touched.author&&Boolean(r.errors.author),helperText:r.touched.author&&r.errors.author}),Object(_.jsx)(H.a,{fullWidth:!0,id:"text",name:"text",label:"Text",value:r.values.text,onChange:r.handleChange,error:r.touched.text&&Boolean(r.errors.text),helperText:r.touched.text&&r.errors.text,multiline:!0,rows:5}),Object(_.jsx)("input",{accept:"image/*",id:"faceImage",type:"file",onChange:function(e){if(e.target.files){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){r.setFieldValue("avatar",a.result)}}},hidden:!0}),Object(_.jsxs)(w.a,{direction:"row",justifyContent:"space-between",children:[Object(_.jsx)("label",{htmlFor:"faceImage",children:Object(_.jsx)(K.a,{title:"Select image",children:Object(_.jsx)(M.a,{color:"primary","aria-label":"upload picture",component:"span",style:{padding:0},children:Object(_.jsx)(N.a,{fontSize:"large"})})})}),Object(_.jsx)(R.a,{src:r.values.avatar})]}),Object(_.jsx)(C.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Submit"})]})})})})},ee=["id","incrementRating","decrementRating","timeAgo"],te=Object(y.a)((function(){var e=r.a.useState(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=x().commentsStore.comments;return Object(_.jsxs)(w.a,{spacing:2,alignItems:"center",sx:{padding:5},children:[Object(_.jsx)(C.a,{variant:"contained",onClick:function(){n(!0)},children:"Add comment"}),Object(_.jsx)($,{open:a,handleClose:function(){n(!1)}}),i.map((function(e){var t=e.id,a=e.incrementRating,n=e.decrementRating,r=e.timeAgo,i=Object(v.a)(e,ee);return Object(_.jsx)(P,Object(f.a)({incrementRating:a,decrementRating:n,timeAgo:r},i),t)}))]})}));var ae=function(){return Object(_.jsxs)(b,{value:h,children:[Object(_.jsx)(o.a,{}),Object(_.jsx)(te,{})]})};c.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(ae,{})}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.3eb0fc58.chunk.js.map