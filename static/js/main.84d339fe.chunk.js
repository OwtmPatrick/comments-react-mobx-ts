(this["webpackJsonpcomments-react-mobx-ts"]=this["webpackJsonpcomments-react-mobx-ts"]||[]).push([[0],{277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),c=a(323),l=a(26),d=l.a.model("Comment",{id:l.a.identifier,text:l.a.string,author:l.a.string,avatar:l.a.string,date:l.a.Date,rating:0,hidden:l.a.boolean}).views((function(e){return{timeAgo:function(){var t=(new Date).getTime()-e.date.getTime(),a=36e5,n=864e5;return t<a?"".concat(Math.round(t/6e4)," minutes ago"):t<n?"".concat(Math.round(t/a)," hours ago"):"".concat(Math.round(t/n)," days ago")}}})).actions((function(e){return{incrementRating:function(){e.rating+=1},decrementRating:function(){e.rating-=1,e.rating<-10&&(e.hidden=!0)},toggle:function(){e.hidden=!e.hidden}}})),s=l.a.model("CommentsStore",{comments:l.a.array(d)}).actions((function(e){return{addComment:function(t){e.comments.push(t)}}})),u=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},m=l.a.model({commentsStore:s}).create({commentsStore:{comments:[{id:u(),text:"The trailer contains the worst bit",author:"Diego Lima",avatar:"https://res.cloudinary.com/tinyfac-es/image/upload/w_1024,h_1024,c_fit/v1627200005/facebook/ti5hffx5qcawk7hrxed5.jpg",date:(new Date).setDate((new Date).getDate()-2),rating:0,hidden:!1},{id:u(),text:"Funny and Entertaining Version by Guy Ritchie",author:"Fica Pacianskiy",avatar:"",date:(new Date).setMinutes((new Date).getMinutes()-45),rating:3,hidden:!1}]}}),h=Object(n.createContext)(null),j=m,b=h.Provider;function g(){var e=Object(n.useContext)(h);if(null===e)throw new Error("Store cannot be null, please add a context provider");return e}var x,O,f=a(64),p=a(74),v=a(14),w=a(320),y=a(333),C=a(144),S=a(334),D=a(336),R=a(338),k=a(329),A=a(339),M=a(335),T=a(340),q=a(341),E=a(49),F=a(313),B=a(314),I=a(328),V=a(36),W=a(75),_=W.a.div(x||(x=Object(V.a)(["\n\tmargin-left: auto\n"]))),z=a(2),J=function(e){return e<0?"error":e>0?"success":"default"},L=function(e){var t=e.rating;return Object(z.jsx)(_,{children:Object(z.jsx)(I.a,{label:t,color:J(t)})})},P=W.a.div(O||(O=Object(V.a)(["\n\twidth: 100%;\n\tmax-width: 400px;\n"]))),G=function(e){var t=e.text,a=e.author,n=e.rating,r=e.avatar,i=e.hidden,o=e.incrementRating,c=e.decrementRating,l=e.timeAgo,d=e.toggle;return Object(z.jsx)(P,{children:i?Object(z.jsx)(S.a,{href:"#",underline:"always",onClick:d,children:"Open comment"}):Object(z.jsxs)(D.a,{children:[Object(z.jsx)(R.a,{avatar:Object(z.jsx)(k.a,{sx:{bgcolor:E.a[700]},"aria-label":"avatar",src:r,children:r||a[0]}),title:a}),Object(z.jsxs)(A.a,{children:[Object(z.jsx)(M.a,{variant:"body1",color:"text.primary",children:t}),Object(z.jsx)(M.a,{variant:"body2",color:"text.secondary",children:l()})]}),Object(z.jsxs)(T.a,{disableSpacing:!0,children:[Object(z.jsx)(q.a,{"aria-label":"increment rating",onClick:o,children:Object(z.jsx)(F.a,{})}),Object(z.jsx)(q.a,{"aria-label":"decrement rating",onClick:c,children:Object(z.jsx)(B.a,{})}),Object(z.jsx)(L,{rating:n,size:"medium"})]})]})})},U=a(330),H=a(332),K=a(325),N=a(324),Q=a(322),X=a(143),Y=a(67),Z=Y.a({email:Y.b().email("Enter a valid email").required("Email is required"),author:Y.b().required("Author is required"),text:Y.b().required("Text is required")}),$=["email"],ee=function(e){var t=e.open,a=e.handleClose,n=g().commentsStore.addComment,r=Object(X.a)({initialValues:{email:"",author:"",text:"",avatar:""},validationSchema:Z,onSubmit:function(e){e.email;var t=Object(p.a)(e,$);n(Object(f.a)(Object(f.a)({},t),{},{id:u(),date:new Date,rating:0,hidden:!1})),r.resetForm(),a()}});return Object(z.jsx)(U.a,{open:t,onClose:a,sx:{"& .MuiDialog-paper":{width:"100%"}},children:Object(z.jsx)("form",{onSubmit:r.handleSubmit,noValidate:!0,children:Object(z.jsx)(H.a,{children:Object(z.jsxs)(w.a,{spacing:2,children:[Object(z.jsx)(K.a,{fullWidth:!0,id:"email",name:"email",label:"Email",type:"email",value:r.values.email,onChange:r.handleChange,error:r.touched.email&&Boolean(r.errors.email),helperText:r.touched.email&&r.errors.email}),Object(z.jsx)(K.a,{fullWidth:!0,id:"author",name:"author",label:"Author",type:"author",value:r.values.author,onChange:r.handleChange,error:r.touched.author&&Boolean(r.errors.author),helperText:r.touched.author&&r.errors.author}),Object(z.jsx)(K.a,{fullWidth:!0,id:"text",name:"text",label:"Text",value:r.values.text,onChange:r.handleChange,error:r.touched.text&&Boolean(r.errors.text),helperText:r.touched.text&&r.errors.text,multiline:!0,rows:5}),Object(z.jsx)("input",{accept:"image/*",id:"faceImage",type:"file",onChange:function(e){if(e.target.files){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){r.setFieldValue("avatar",a.result)}}},hidden:!0}),Object(z.jsxs)(w.a,{direction:"row",justifyContent:"space-between",children:[Object(z.jsx)("label",{htmlFor:"faceImage",children:Object(z.jsx)(N.a,{title:"Select image",children:Object(z.jsx)(q.a,{color:"primary","aria-label":"upload picture",component:"span",style:{padding:0},children:Object(z.jsx)(Q.a,{fontSize:"large"})})})}),Object(z.jsx)(k.a,{src:r.values.avatar})]}),Object(z.jsx)(y.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Submit"})]})})})})},te=["id","incrementRating","decrementRating","timeAgo","toggle"],ae=Object(C.a)((function(){var e=r.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],i=g().commentsStore.comments;return Object(z.jsxs)(w.a,{spacing:2,alignItems:"center",sx:{padding:5},children:[Object(z.jsx)(y.a,{variant:"contained",onClick:function(){n(!0)},children:"Add comment"}),Object(z.jsx)(ee,{open:a,handleClose:function(){n(!1)}}),i.map((function(e){var t=e.id,a=e.incrementRating,n=e.decrementRating,r=e.timeAgo,i=e.toggle,o=Object(p.a)(e,te);return Object(z.jsx)(G,Object(f.a)({id:t,incrementRating:a,decrementRating:n,timeAgo:r,toggle:i},o),t)}))]})}));var ne=function(){return Object(z.jsxs)(b,{value:j,children:[Object(z.jsx)(c.a,{}),Object(z.jsx)(ae,{})]})};o.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(ne,{})}),document.getElementById("root"))}},[[277,1,2]]]);
//# sourceMappingURL=main.84d339fe.chunk.js.map